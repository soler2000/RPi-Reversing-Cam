{% extends 'base.html' %}


<section class="panel">
<h3>Overlay</h3>
<label class="row">
<input type="checkbox" name="overlay_enabled" {% if cfg.overlay.enabled %}checked{% endif %}/> Enable overlay
</label>
<label class="row">
<input type="checkbox" name="show_stats" {% if cfg.overlay.show_stats %}checked{% endif %}/> Show CPU / load / lux
</label>
<h4>Text</h4>
<label class="row">
<input type="checkbox" name="text_enabled" {% if cfg.overlay.text.enabled %}checked{% endif %}/> Enable text
</label>
<label>Content
<input type="text" name="text_content" value="{{ cfg.overlay.text.content }}" />
</label>
<label>Position
<select name="text_position">
{% for p in ['top-left','top-right','bottom-left','bottom-right'] %}
<option value="{{p}}" {% if cfg.overlay.text.position==p %}selected{% endif %}>{{p}}</option>
{% endfor %}
</select>
</label>
<label>Font size (px)
<input type="number" name="font_size" value="{{ cfg.overlay.text.font_size }}" min="8" max="64" />
</label>
<label>Margin (px)
<input type="number" name="margin" value="{{ cfg.overlay.text.margin }}" min="0" max="64" />
</label>
</section>


<section class="panel">
<h3>Reversing Lines</h3>
{% for i in [1,2] %}
{% set line = cfg.overlay.lines['line' ~ i] %}
<fieldset class="fieldset">
<legend>Line {{i}}</legend>
<label class="row"><input type="checkbox" name="l{{i}}_enabled" {% if line.enabled %}checked{% endif %}/> Enabled</label>
<div class="row two">
<label>Start X
<input type="number" step="0.01" min="0" max="1" name="l{{i}}_start_x" value="{{ line.start[0] }}" />
</label>
<label>Start Y
<input type="number" step="0.01" min="0" max="1" name="l{{i}}_start_y" value="{{ line.start[1] }}" />
</label>
</div>
<div class="row two">
<label>End X
<input type="number" step="0.01" min="0" max="1" name="l{{i}}_end_x" value="{{ line.end[0] }}" />
</label>
<label>End Y
<input type="number" step="0.01" min="0" max="1" name="l{{i}}_end_y" value="{{ line.end[1] }}" />
</label>
</div>
<div class="row two">
<label>Width (px)
<input type="number" min="1" max="20" name="l{{i}}_width_px" value="{{ line.width_px }}" />
</label>
<label>Alpha (0..1)
<input type="number" step="0.05" min="0" max="1" name="l{{i}}_alpha" value="{{ line.alpha }}" />
</label>
</div>
<label>Color (#RRGGBB)
<input type="text" name="l{{i}}_color" value="{{ line.color }}" />
</label>
</fieldset>
{% endfor %}
</section>


<div class="actions">
<button class="btn" type="submit">Save & Apply</button>
</div>
</form>


<p class="hint">Settings are saved to <code>/opt/rpi-reversing-cam/config.yaml</code> and persist across restarts.</p>
{% endblock %}