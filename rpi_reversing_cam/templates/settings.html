{% extends "base.html" %}
{% block content %}
<form method="post" class="card">
  <h2>Camera</h2>
  <div class="grid">
    <label>Width <input type="number" name="width" value="{{ cfg.camera.width }}"></label>
    <label>Height <input type="number" name="height" value="{{ cfg.camera.height }}"></label>
    <label>FPS <input type="number" name="fps" value="{{ cfg.camera.fps }}"></label>
    <label>Rotation
      <select name="rotation">
        {% for r in [0,90,180,270] %}
        <option value="{{r}}" {% if cfg.camera.rotation==r %}selected{% endif %}>{{r}}</option>
        {% endfor %}
      </select>
    </label>
  </div>

  <h2>Overlay</h2>
  <label class="row"><input type="checkbox" name="ov_enabled" {% if cfg.overlay.enabled %}checked{% endif %}> Enabled</label>

  <fieldset>
    <legend>Text</legend>
    <label class="row"><input type="checkbox" name="ov_text_enabled" {% if cfg.overlay.text.enabled %}checked{% endif %}> Show text</label>
    <label>Content <input name="ov_text_content" value="{{ cfg.overlay.text.content }}"></label>
    <label>Position
      <select name="ov_text_pos">
        {% for p in ["top-left","top-center","top-right","center","bottom-left","bottom-center","bottom-right"] %}
        <option value="{{p}}" {% if cfg.overlay.text.position==p %}selected{% endif %}>{{p}}</option>
        {% endfor %}
      </select>
    </label>
    <label>Font size <input type="number" name="ov_text_size" value="{{ cfg.overlay.text.font_size }}"></label>
    <label>Margin <input type="number" name="ov_text_margin" value="{{ cfg.overlay.text.margin }}"></label>
  </fieldset>

  <fieldset>
    <legend>Line</legend>
    <label class="row"><input type="checkbox" name="ov_line_enabled" {% if cfg.overlay.line.enabled %}checked{% endif %}> Show line</label>
    <label>Color <input name="ov_line_color" value="{{ cfg.overlay.line.color }}"></label>
    <label>Width(px) <input type="number" name="ov_line_width" value="{{ cfg.overlay.line.width_px }}"></label>
    <div class="grid">
      <label>Start X(0..1) <input step="0.01" name="ov_line_sx" value="{{ cfg.overlay.line.start[0] }}"></label>
      <label>Start Y(0..1) <input step="0.01" name="ov_line_sy" value="{{ cfg.overlay.line.start[1] }}"></label>
      <label>End X(0..1) <input step="0.01" name="ov_line_ex" value="{{ cfg.overlay.line.end[0] }}"></label>
      <label>End Y(0..1) <input step="0.01" name="ov_line_ey" value="{{ cfg.overlay.line.end[1] }}"></label>
    </div>
  </fieldset>

  <div class="actions">
    <button type="submit">Save & Apply</button>
  </div>
</form>
{% endblock %}
